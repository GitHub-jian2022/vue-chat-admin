(function(e){function t(t){for(var r,o,c=t[0],u=t[1],i=t[2],l=0,d=[];l<c.length;l++)o=c[l],a[o]&&d.push(a[o][0]),a[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);f&&f(t);while(d.length)d.shift()();return s.push.apply(s,i||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(r=!1)}r&&(s.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},o={app:0},a={app:0},s=[];function c(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-26872a55":"bf7263bc","chunk-2d0e5b39":"e33ba235","chunk-34c15bf7":"8e3f16c3","chunk-459c6d04":"663acc02","chunk-53c8bdb2":"2e49516b","chunk-66af452b":"df96c4f0","chunk-67879d9f":"4769d457","chunk-718e3422":"d0fa9722","chunk-1871bc6a":"d29b662b","chunk-1b4d597c":"2263b089","chunk-98e9e358":"45fed133","chunk-e811d7ac":"95392cd0"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={"chunk-26872a55":1,"chunk-34c15bf7":1,"chunk-459c6d04":1,"chunk-53c8bdb2":1,"chunk-66af452b":1,"chunk-67879d9f":1,"chunk-718e3422":1,"chunk-1871bc6a":1,"chunk-1b4d597c":1,"chunk-98e9e358":1,"chunk-e811d7ac":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise(function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-26872a55":"0c2ad552","chunk-2d0e5b39":"31d6cfe0","chunk-34c15bf7":"0ef1f4c2","chunk-459c6d04":"6eb5881f","chunk-53c8bdb2":"175d897c","chunk-66af452b":"5590bc9e","chunk-67879d9f":"98f6c615","chunk-718e3422":"4c4094b0","chunk-1871bc6a":"ce691775","chunk-1b4d597c":"9d663485","chunk-98e9e358":"46c38907","chunk-e811d7ac":"24b02d78"}[e]+".css",a=u.p+r,s=document.getElementsByTagName("link"),c=0;c<s.length;c++){var i=s[c],l=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(l===r||l===a))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){i=d[c],l=i.getAttribute("data-href");if(l===r||l===a)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||a,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete o[e],f.parentNode.removeChild(f),n(s)},f.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(f)}).then(function(){o[e]=0}));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise(function(t,n){r=a[e]=[t,n]});t.push(r[2]=s);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=c(e),i=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+r+": "+o+")");s.type=r,s.request=o,n[1](s)}a[e]=void 0}};var d=setTimeout(function(){i({type:"timeout",target:l})},12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var f=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0f9a":function(e,t,n){"use strict";n.r(t),t["default"]={namespaced:!0,state:{currentUserProfile:{},isLogin:!1,isSDKReady:!1,token:"",roles:[]},mutations:{updateToken(e,t){e.token=t},updateRoles(e,t){e.roles=t},updateCurrentUserProfile(e,t){console.log("updateCurrentUserProfile",t),e.currentUserProfile=t},toggleIsLogin(e,t){console.log("toggleIsLogin",t),e.isLogin="undefined"===typeof t?!e.isLogin:t},toggleIsSDKReady(e,t){console.log("isSDKReady",t),e.isSDKReady="undefined"===typeof t?!e.isSDKReady:t},reset(e){console.log("reset"),Object.assign(e,{currentUserProfile:{},isLogin:!1,isSDKReady:!1,token:"",roles:[]})}},actions:{}}},"1cbe":function(e,t,n){"use strict";n.r(t);const r={namespaced:!0,state:{currentConversation:{},toUserId:"",currentMessageList:[],nextReqMessageID:"",isCompleted:!1,conversationList:[]},getters:{toAccount:e=>{if(!e.currentConversation||!e.currentConversation.conversationID)return"";switch(e.currentConversation.type){case"C2C":return e.currentConversation.conversationID.replace("C2C","");case"GROUP":return e.currentConversation.conversationID.replace("GROUP","");default:return e.currentConversation.conversationID}},currentConversationType:e=>{return e.currentConversation&&e.currentConversation.type?e.currentConversation.type:""}},mutations:{createcurrentConversation(e,t){console.log("currentConversation: ",t),e.currentConversation=t,e.currentMessageList=[],e.nextReqMessageID="",e.isCompleted=!1},updatecurrentConversation(e,t){console.log("updatecurrentConversation",t),e.currentConversation=Object.assign({},t),e.toUserId=t.userProfile.userID,e.currentMessageList=[],e.nextReqMessageID="",e.isCompleted=!1},updateNextReqMessageID(e,t){e.nextReqMessageID=t},updateIsCompleted(e,t){e.isCompleted=t},updateConversationList(e,t){console.log("更新会话列表",t),e.conversationList=t},pushCurrentMessageList(e,t){if(e.currentConversation.conversationID){if(Array.isArray(t)){const n=t.filter(t=>t.conversationID===e.currentConversation.conversationID);console.log("result",n),e.currentMessageList=[...e.currentMessageList,...n]}else t.conversationID===e.currentConversation.conversationID&&(console.log("插入1条消息",t),e.currentMessageList=[...e.currentMessageList,t]);console.log("当前会话",JSON.parse(JSON.stringify(e.currentMessageList)))}else console.log("还没当前会话")},removeMessage(e,t){const n=e.currentMessageList.findIndex(({ID:e})=>e===t.ID);n>=0&&e.currentMessageList.splice(n,1)},unshiftCurrentMessageList(e,t){console.log(t),t&&(e.currentMessageList=[...t,...e.currentMessageList])}},actions:{}};t["default"]=r},"2e0d":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("keep-alive",[e.$route.meta.keepAlive?n("router-view"):e._e()],1),e.$route.meta.keepAlive?e._e():n("router-view")],1)},a=[],s={name:"app",created(){this.tim.on(this.$TIM.EVENT.SDK_READY,this.onReadyStateUpdate,this),this.tim.on(this.$TIM.EVENT.MESSAGE_RECEIVED,this.onReceiveMessage),this.tim.on(this.$TIM.EVENT.CONVERSATION_LIST_UPDATED,e=>{this.$store.commit("conversation/updateConversationList",e.data)})},methods:{onReadyStateUpdate({name:e}){const t=e===this.$TIM.EVENT.SDK_READY;this.$store.commit("user/toggleIsSDKReady",t)},onReceiveMessage({data:e}){this.$store.commit("conversation/pushCurrentMessageList",e)}}},c=s,u=n("2877"),i=Object(u["a"])(c,o,a,!1,null,null,null),l=i.exports,d=n("8c4f"),f=n("2f62");const p={currentUserProfile:e=>e.user.currentUserProfile,isLogin:e=>e.user.isLogin,token:e=>e.user.token,roles:e=>e.user.roles};var h=p,g=n("0e44");r["a"].use(f["a"]);const b=n("c653"),m=b.keys().reduce((e,t)=>{const n=t.replace(/^\.\/(.*)\.\w+$/,"$1"),r=b(t);return e[n]=r.default,e},{}),v=new f["a"].Store({plugins:[Object(g["a"])()],modules:m,getters:h});var k=v,y={path:"/room",name:"room",component:()=>Promise.all([n.e("chunk-718e3422"),n.e("chunk-1871bc6a")]).then(n.bind(null,"ce76")),redirect:"/room/index",children:[{path:"index",meta:{title:"聊天室",keepAlive:!0},component:()=>Promise.all([n.e("chunk-718e3422"),n.e("chunk-1b4d597c")]).then(n.bind(null,"79b0"))},{path:"roomInfo",name:"roomInfo",meta:{title:"聊天信息"},component:()=>n.e("chunk-66af452b").then(n.bind(null,"570d"))}]},C={path:"/my",component:()=>n.e("chunk-2d0e5b39").then(n.bind(null,"9639")),redirect:"/my/center",children:[{path:"center",meta:{title:"个人中心"},component:()=>n.e("chunk-53c8bdb2").then(n.bind(null,"364e"))},{path:"set",meta:{title:"设置"},component:()=>n.e("chunk-34c15bf7").then(n.bind(null,"8578"))}]};r["a"].use(d["a"]);const D=new d["a"]({routes:[{path:"/login",component:()=>n.e("chunk-26872a55").then(n.bind(null,"9ed6")),meta:{title:"登陆"}},{path:"/",redirect:"/index"},{path:"/index",component:()=>n.e("chunk-98e9e358").then(n.bind(null,"37f9")),meta:{title:"首页",keepAlive:!0}},{path:"/contact",meta:{title:"通讯录"},component:()=>n.e("chunk-459c6d04").then(n.bind(null,"0648"))},{path:"/cart",meta:{title:"购物车"},component:()=>n.e("chunk-67879d9f").then(n.bind(null,"1b7b"))},C,y,{path:"*",component:()=>n.e("chunk-e811d7ac").then(n.bind(null,"be4d"))}],scrollBehavior(e,t,n){return n&&e.meta.keepAlive?n:new Promise(e=>{setTimeout(()=>{e({x:0,y:1})},0)})}});D.beforeEach((e,t,n)=>{let{title:r,needLogin:o}=e.meta,{isLogin:a}=k.state;document.title=r,o&&!a?n({path:"/login"}):n()});var I=D,L=(n("2e0d"),n("433b"),n("d399")),S=n("bc3a"),M=n.n(S);const E=M.a.create({baseURL:"http://47.100.138.242:8081/api",timeout:5e4});E.interceptors.request.use(e=>{const{token:t}=k.state.user;return t&&(e.headers["Authorization"]="Bearer "+t),e},e=>{console.log(e),Promise.reject(e)}),E.interceptors.response.use(e=>{const t=e.data;return"401"==t.code?L["a"].fail(t.msg):"403"==t.code?I.push("/login"):console.log(t.msg),t},e=>{Promise.reject("网络异常")});var P=E,T={data(){return{name:""}},created(){},fomatDate(e){let t=new Date(e),n=t.getFullYear(),r=t.getMonth()+1,o=t.getDate();return`${n}年-${r}月-${o}日`}},w=(n("576f"),n("92e2")),R=(n("cd52"),n("e11d")),A=(n("5f68"),n("f600")),O=(n("4391"),n("58e6")),j=(n("2591"),n("3104")),x=(n("cea6"),n("28a2")),U=(n("bf24"),n("44bf")),_=(n("2a53"),n("34e9")),$=(n("da02"),n("6b41")),N=(n("ec8c"),n("1125")),K=(n("837b"),n("c36e")),q=(n("8d12"),n("2bb1")),V=(n("3cc4"),n("5596")),B=(n("47e2"),n("2241")),G=(n("9eda"),n("565f")),Y=(n("87d0"),n("e41f")),J=(n("c625"),n("b650")),F=(n("3ec1"),n("7744")),z=(n("93b0"),n("2bdd")),H=(n("8990"),n("5e46")),Q=(n("558f"),n("0b33")),W=(n("b342"),n("ad06"));r["a"].use(W["a"]),r["a"].use(Q["a"]),r["a"].use(H["a"]),r["a"].use(z["a"]),r["a"].use(F["a"]),r["a"].use(J["a"]),r["a"].use(Y["a"]),r["a"].use(G["a"]),r["a"].use(B["a"]),r["a"].use(L["a"]),r["a"].use(V["a"]),r["a"].use(q["a"]),r["a"].use(K["a"]),r["a"].use(N["a"]),r["a"].use($["a"]),r["a"].use(_["a"]),r["a"].use(U["a"]),r["a"].use(x["a"]),r["a"].use(j["a"]),r["a"].use(O["a"]),r["a"].use(A["a"]),r["a"].use(R["a"]),r["a"].use(w["a"]);n("5cfb");var X=n("5c18"),Z=n("e23e"),ee=n.n(Z);r["a"].prototype.$bus=new r["a"],r["a"].prototype.tim=X["a"].tim,r["a"].prototype.$TIM=ee.a,r["a"].prototype.$axios=P,r["a"].mixin(T),r["a"].config.productionTip=!1,new r["a"]({store:k,router:I,render:e=>e(l)}).$mount("#app")},"5c18":function(e,t,n){"use strict";var r=n("e23e"),o=n.n(r),a=n("3438"),s=n.n(a);const c={SDKAppID:1400277699},u=o.a.create(c);u.setLogLevel(1);const i=o.a;function l(e){const t=1400277699,n=604800,r="281d8830bb13fa0923bc5c34cc13690faac214906fd5342782daba5a3e645f3c";""!==t&&""!==r||alert("请先配置好您的账号信息： SDKAPPID 及 SECRETKEY \r\n\r\nPlease configure your SDKAPPID/SECRETKEY in js/debug/GenerateTestUserSig.js");const o=new LibGenerateTestUserSig(t,r,n),a=o.genTestUserSig(e);return{sdkAppId:t,userSig:a}}u.registerPlugin({"cos-js-sdk":s.a}),t["a"]={tim:u,TIMData:i,genTestUserSig:l}},c653:function(e,t,n){var r={"./conversation.js":"1cbe","./user.js":"0f9a"};function o(e){var t=a(e);return n(t)}function a(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id="c653"}});
//# sourceMappingURL=app.d1c287ed.js.map