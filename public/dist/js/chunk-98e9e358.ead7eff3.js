(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-98e9e358"],{"104d":function(e,t,n){"use strict";var i=n("1610"),o=n.n(i);o.a},1610:function(e,t,n){},"37f9":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"conversation"},[n("van-nav-bar",{attrs:{title:"消息"}}),e.conversationList&&e.conversationList.length>0?n("div",{staticClass:"list-box"},e._l(e.conversationList,function(t,i){return n("conversation-item",{key:i,attrs:{message:t},on:{ItemClick:e.ItemClick}})}),1):e._e(),n("Footer",{attrs:{page:"index"}})],1)},o=[],s=n("fd2d"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("van-swipe-cell",{attrs:{name:e.message.conversationID},on:{click:e.onCellClick},scopedSlots:e._u([{key:"right",fn:function(){return[n("van-button",{staticClass:"delete-button",attrs:{square:"",text:"删除",type:"danger"}})]},proxy:!0}])},[n("div",{staticClass:"cell-item",on:{click:e.ItemClick}},[n("img",{staticClass:"avatar",attrs:{src:e.userProfile.avatar,alt:""}}),n("div",{staticClass:"cell-item-content"},[n("div",{staticClass:"cell-item-content-l"},[n("div",[e._v(e._s(e.userProfile.nick))]),n("div",{staticClass:"cell-item-content-l-lastmessage"},[e._l(e.contentList,function(t,i){return["text"===t.name?n("span",{key:i},[e._v(e._s(t.text))]):"img"===t.name?n("img",{key:i,attrs:{src:t.src,width:"20px",height:"20px"}}):e._e()]})],2)]),n("div",{staticClass:"cell-item-content-r"},[n("div",{staticClass:"time"},[e._v(e._s(e.timeFliter(e.lastMessage.lastTime)))]),e.message.unreadCount>0?n("div",{staticClass:"unreadCount"},[e._v(e._s(e.message.unreadCount))]):e._e()])])])])},m=[],g=n("ed08"),p=n("49ab"),r={name:"ConversationItem",props:{message:{type:Object,default:{}}},computed:{userProfile(){return this.message.userProfile},lastMessage(){return this.message.lastMessage},contentList(){return Object(p["a"])(this.lastMessage.payload)}},methods:{timeFliter(e){let t=new Date(1e3*e),n=Object(g["a"])(t);return n},ItemClick(){this.$emit("ItemClick",this.message)},onCellClick(e){if("right"===e){let e=this.tim.deleteConversation(this.message.conversationID);e.then(e=>{const{conversationID:t}=e.data;console.log("conversationID",t)}).catch(e=>{console.warn("deleteConversation error:",e)})}}}},c=r,x=(n("6b1f"),n("2877")),_=Object(x["a"])(c,a,m,!1,null,"66735b70",null),l=_.exports,j=n("2f62"),u={components:{Footer:s["a"],ConversationItem:l},data(){return{}},computed:{...Object(j["c"])({isLogin:e=>e.user.isLogin,isSDKReady:e=>e.user.isSDKReady,conversationList:e=>e.conversation.conversationList})},watch:{isSDKReady(e){console.log("isSDKReady",e),e?(this.updateUserInfo(),this.getConversationList()):this.$router.replace("/login")}},methods:{updateUserInfo(){let e=JSON.parse(localStorage.getItem("userInfo"));console.log("userInfo",e);let t=this.tim.updateMyProfile({nick:e.username,avatar:e.img,gender:this.$TIM.TYPES.GENDER_MALE,selfSignature:"暂无个性签名",allowType:this.$TIM.TYPES.ALLOW_TYPE_ALLOW_ANY});t.then(e=>{console.log("提交资料成功",e.data)}).catch(e=>{console.log("updateMyProfile error:",e)})},getConversationList(){let e=this.tim.getConversationList();e.then(e=>{let t=e.data.conversationList;t.length&&this.$store.commit("conversation/updateConversationList",t)}).catch(e=>{console.warn("getConversationList error:",e)})},ItemClick(e){console.log(e),this.$store.commit("conversation/updatecurrentConversation",e),this.$router.push("/room")}}},d=u,f=(n("5b8d"),Object(x["a"])(d,i,o,!1,null,"10513388",null));t["default"]=f.exports},"49ab":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("65a7");function o(e){let t=[],n=e.text,o=-1,s=-1;while(""!==n)switch(o=n.indexOf("["),s=n.indexOf("]"),o){case 0:if(-1===s)t.push({name:"text",text:n}),n="";else{let e=n.slice(0,s+1);i["a"][e]?(t.push({name:"img",src:i["c"]+i["a"][e]}),n=n.substring(s+1)):(t.push({name:"text",text:"["}),n=n.slice(1))}break;case-1:t.push({name:"text",text:n}),n="";break;default:t.push({name:"text",text:n.slice(0,o)}),n=n.substring(o);break}return t}},"5b8d":function(e,t,n){"use strict";var i=n("ddf0"),o=n.n(i);o.a},"65a7":function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s});const i="https://imgcache.qq.com/open/qcloud/tim/assets/emoji/",o={"[NO]":"emoji_0@2x.png","[OK]":"emoji_1@2x.png","[下雨]":"emoji_2@2x.png","[么么哒]":"emoji_3@2x.png","[乒乓]":"emoji_4@2x.png","[便便]":"emoji_5@2x.png","[信封]":"emoji_6@2x.png","[偷笑]":"emoji_7@2x.png","[傲慢]":"emoji_8@2x.png","[再见]":"emoji_9@2x.png","[冷汗]":"emoji_10@2x.png","[凋谢]":"emoji_11@2x.png","[刀]":"emoji_12@2x.png","[删除]":"emoji_13@2x.png","[勾引]":"emoji_14@2x.png","[发呆]":"emoji_15@2x.png","[发抖]":"emoji_16@2x.png","[可怜]":"emoji_17@2x.png","[可爱]":"emoji_18@2x.png","[右哼哼]":"emoji_19@2x.png","[右太极]":"emoji_20@2x.png","[右车头]":"emoji_21@2x.png","[吐]":"emoji_22@2x.png","[吓]":"emoji_23@2x.png","[咒骂]":"emoji_24@2x.png","[咖啡]":"emoji_25@2x.png","[啤酒]":"emoji_26@2x.png","[嘘]":"emoji_27@2x.png","[回头]":"emoji_28@2x.png","[困]":"emoji_29@2x.png","[坏笑]":"emoji_30@2x.png","[多云]":"emoji_31@2x.png","[大兵]":"emoji_32@2x.png","[大哭]":"emoji_33@2x.png","[太阳]":"emoji_34@2x.png","[奋斗]":"emoji_35@2x.png","[奶瓶]":"emoji_36@2x.png","[委屈]":"emoji_37@2x.png","[害羞]":"emoji_38@2x.png","[尴尬]":"emoji_39@2x.png","[左哼哼]":"emoji_40@2x.png","[左太极]":"emoji_41@2x.png","[左车头]":"emoji_42@2x.png","[差劲]":"emoji_43@2x.png","[弱]":"emoji_44@2x.png","[强]":"emoji_45@2x.png","[彩带]":"emoji_46@2x.png","[彩球]":"emoji_47@2x.png","[得意]":"emoji_48@2x.png","[微笑]":"emoji_49@2x.png","[心碎了]":"emoji_50@2x.png","[快哭了]":"emoji_51@2x.png","[怄火]":"emoji_52@2x.png","[怒]":"emoji_53@2x.png","[惊恐]":"emoji_54@2x.png","[惊讶]":"emoji_55@2x.png","[憨笑]":"emoji_56@2x.png","[手枪]":"emoji_57@2x.png","[打哈欠]":"emoji_58@2x.png","[抓狂]":"emoji_59@2x.png","[折磨]":"emoji_60@2x.png","[抠鼻]":"emoji_61@2x.png","[抱抱]":"emoji_62@2x.png","[抱拳]":"emoji_63@2x.png","[拳头]":"emoji_64@2x.png","[挥手]":"emoji_65@2x.png","[握手]":"emoji_66@2x.png","[撇嘴]":"emoji_67@2x.png","[擦汗]":"emoji_68@2x.png","[敲打]":"emoji_69@2x.png","[晕]":"emoji_70@2x.png","[月亮]":"emoji_71@2x.png","[棒棒糖]":"emoji_72@2x.png","[汽车]":"emoji_73@2x.png","[沙发]":"emoji_74@2x.png","[流汗]":"emoji_75@2x.png","[流泪]":"emoji_76@2x.png","[激动]":"emoji_77@2x.png","[灯泡]":"emoji_78@2x.png","[炸弹]":"emoji_79@2x.png","[熊猫]":"emoji_80@2x.png","[爆筋]":"emoji_81@2x.png","[爱你]":"emoji_82@2x.png","[爱心]":"emoji_83@2x.png","[爱情]":"emoji_84@2x.png","[猪头]":"emoji_85@2x.png","[猫咪]":"emoji_86@2x.png","[献吻]":"emoji_87@2x.png","[玫瑰]":"emoji_88@2x.png","[瓢虫]":"emoji_89@2x.png","[疑问]":"emoji_90@2x.png","[白眼]":"emoji_91@2x.png","[皮球]":"emoji_92@2x.png","[睡觉]":"emoji_93@2x.png","[磕头]":"emoji_94@2x.png","[示爱]":"emoji_95@2x.png","[礼品袋]":"emoji_96@2x.png","[礼物]":"emoji_97@2x.png","[篮球]":"emoji_98@2x.png","[米饭]":"emoji_99@2x.png","[糗大了]":"emoji_100@2x.png","[红双喜]":"emoji_101@2x.png","[红灯笼]":"emoji_102@2x.png","[纸巾]":"emoji_103@2x.png","[胜利]":"emoji_104@2x.png","[色]":"emoji_105@2x.png","[药]":"emoji_106@2x.png","[菜刀]":"emoji_107@2x.png","[蛋糕]":"emoji_108@2x.png","[蜡烛]":"emoji_109@2x.png","[街舞]":"emoji_110@2x.png","[衰]":"emoji_111@2x.png","[西瓜]":"emoji_112@2x.png","[调皮]":"emoji_113@2x.png","[象棋]":"emoji_114@2x.png","[跳绳]":"emoji_115@2x.png","[跳跳]":"emoji_116@2x.png","[车厢]":"emoji_117@2x.png","[转圈]":"emoji_118@2x.png","[鄙视]":"emoji_119@2x.png","[酷]":"emoji_120@2x.png","[钞票]":"emoji_121@2x.png","[钻戒]":"emoji_122@2x.png","[闪电]":"emoji_123@2x.png","[闭嘴]":"emoji_124@2x.png","[闹钟]":"emoji_125@2x.png","[阴险]":"emoji_126@2x.png","[难过]":"emoji_127@2x.png","[雨伞]":"emoji_128@2x.png","[青蛙]":"emoji_129@2x.png","[面条]":"emoji_130@2x.png","[鞭炮]":"emoji_131@2x.png","[风车]":"emoji_132@2x.png","[飞吻]":"emoji_133@2x.png","[飞机]":"emoji_134@2x.png","[饥饿]":"emoji_135@2x.png","[香蕉]":"emoji_136@2x.png","[骷髅]":"emoji_137@2x.png","[麦克风]":"emoji_138@2x.png","[麻将]":"emoji_139@2x.png","[鼓掌]":"emoji_140@2x.png","[龇牙]":"emoji_141@2x.png"},s=["[龇牙]","[调皮]","[流汗]","[偷笑]","[再见]","[敲打]","[擦汗]","[猪头]","[玫瑰]","[流泪]","[大哭]","[嘘]","[酷]","[抓狂]","[委屈]","[便便]","[炸弹]","[菜刀]","[可爱]","[色]","[害羞]","[得意]","[吐]","[微笑]","[怒]","[尴尬]","[惊恐]","[冷汗]","[爱心]","[示爱]","[白眼]","[傲慢]","[难过]","[惊讶]","[疑问]","[困]","[么么哒]","[憨笑]","[爱情]","[衰]","[撇嘴]","[阴险]","[奋斗]","[发呆]","[右哼哼]","[抱抱]","[坏笑]","[飞吻]","[鄙视]","[晕]","[大兵]","[可怜]","[强]","[弱]","[握手]","[胜利]","[抱拳]","[凋谢]","[米饭]","[蛋糕]","[西瓜]","[啤酒]","[瓢虫]","[勾引]","[OK]","[爱你]","[咖啡]","[月亮]","[刀]","[发抖]","[差劲]","[拳头]","[心碎了]","[太阳]","[礼物]","[皮球]","[骷髅]","[挥手]","[闪电]","[饥饿]","[咒骂]","[折磨]","[抠鼻]","[鼓掌]","[糗大了]","[左哼哼]","[打哈欠]","[快哭了]","[吓]","[篮球]","[乒乓]","[NO]","[跳跳]","[怄火]","[转圈]","[磕头]","[回头]","[跳绳]","[激动]","[街舞]","[献吻]","[左太极]","[右太极]","[闭嘴]","[猫咪]","[红双喜]","[鞭炮]","[红灯笼]","[麻将]","[麦克风]","[礼品袋]","[信封]","[象棋]","[彩带]","[蜡烛]","[爆筋]","[棒棒糖]","[奶瓶]","[面条]","[香蕉]","[飞机]","[左车头]","[车厢]","[右车头]","[多云]","[下雨]","[钞票]","[熊猫]","[灯泡]","[风车]","[闹钟]","[雨伞]","[彩球]","[钻戒]","[沙发]","[纸巾]","[手枪]","[青蛙]"]},"6b1f":function(e,t,n){"use strict";var i=n("7b75"),o=n.n(i);o.a},"7b75":function(e,t,n){},ddf0:function(e,t,n){},ed08:function(e,t,n){"use strict";n.d(t,"a",function(){return i});const i=(e,t={})=>{const{part:n=0,dateComplete:i=!1,timeComplete:o=!0,dateConnector:s="-",timeConnector:a=":",hour12:m=!1,needSecond:g=!1}=t;(new Date).getTime();let p=(new Date).getFullYear(),r=(new Date).getMonth()+1,c=(new Date).getDate(),x=e.getFullYear(),_=e.getMonth()+1,l=e.getDate(),j=e.getHours(),u=e.getMinutes(),d=e.getSeconds(),f="",v="",h=!1;p===x&&(h=!0);let C=!1;return p===x&&r===_&&c===l&&(C=!0),i&&(_<10&&(_="0"+_),l<10&&(l="0"+l)),f=x+s+_+s+l,m&&(j>12?(j-=12,o&&(j=j<10?"下午 0"+j:"下午 "+j)):o&&(j=j<10?"上午 0"+j:"上午 "+j)),o&&(u<10&&(u="0"+u),d<10&&(d="0"+d)),v=j+a+u+a+d,0==n?C?g?v:j+a+u:h?g?v:_+s+l+" "+j+a+u:g?f+" "+v:f+" "+j+a+u:1==n?f:2==n?v:"传参有误"}},fd2d:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"footer flex jc-sa w100pc fixed bott0 bg-fff aic footer"},[n("li",{staticClass:"item"},[n("router-link",{staticClass:"flex2 aic f20 yellow",attrs:{to:"/index","active-class":"active"}},[n("van-icon",{attrs:{name:"chat-o"}}),n("p",{staticClass:"mt-5 f12 text"},[e._v("首页")])],1)],1),n("li",{staticClass:"item"},[n("router-link",{staticClass:"flex2 aic f20 text",attrs:{to:"/contact","active-class":"active"}},[n("van-icon",{attrs:{name:"friends-o"}}),n("p",{staticClass:"mt-5 text f12"},[e._v("通讯录")])],1)],1),n("li",{staticClass:"item"},[n("router-link",{staticClass:"flex2 aic f20 text",attrs:{to:"/my","active-class":"active"}},[n("van-icon",{staticClass:"text",attrs:{name:"user-o"}}),n("p",{staticClass:"mt-5 text f12"},[e._v("我的")])],1)],1)])},o=[],s={components:{}},a=s,m=(n("104d"),n("2877")),g=Object(m["a"])(a,i,o,!1,null,"5a02651c",null);t["a"]=g.exports}}]);
//# sourceMappingURL=chunk-98e9e358.ead7eff3.js.map